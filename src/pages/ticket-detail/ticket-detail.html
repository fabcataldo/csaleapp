<!--
  Generated template for the TicketDetailPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-navbar color="primary">
        <ion-title>Detalle de compra</ion-title>
    </ion-navbar>
</ion-header>

<ion-content padding>
    <div id="Html2Pdf">
        <ion-card>
            <ion-item no-lines>
                <h1 style="color:black; text-align:center; ">
                    CSaleApp
                </h1>
                <h2 style="color:black; text-align:center;">
                    Recibo
                </h2>
                <h3 style="color:black; text-align:center;">
                    Código de compra: <br>{{ticket._id}}
                </h3>
            </ion-item>

            <ion-card-content>
                <ion-list>
                    <ion-item no-lines>
                        Fecha: {{ticket.date_of_purchase}}
                    </ion-item>

                    <ion-item>
                        Productos:
                        <ion-list>
                            <ion-item text-wrap>
                                <ion-grid>
                                    <ion-row>
                                        <ion-col class="cell-class">
                                            Descripción
                                        </ion-col>
                                        <ion-col class="cell-class">
                                            Precio
                                        </ion-col>
                                        <ion-col class="cell-class">
                                            Cantidad
                                        </ion-col>
                                        <ion-col class="cell-class">
                                            Validez
                                        </ion-col>
                                    </ion-row>
                                    <div *ngFor="let purchaseProduct of ticket.purchased_products">
                                        <ion-row>
                                            <ion-col class="cell-class">
                                                {{purchaseProduct.product.description}}
                                            </ion-col>
                                            <ion-col class="cell-class">
                                                {{purchaseProduct.product.price}}
                                            </ion-col>
                                            <ion-col class="cell-class">
                                                {{purchaseProduct.quantity}}
                                            </ion-col>
                                            <ion-col class="cell-class">
                                                {{purchaseProduct.product.valid_date_from}}-{{purchaseProduct.product.valid_date_to}}
                                            </ion-col>
                                        </ion-row>
                                    </div>
                                </ion-grid>
                            </ion-item>
                        </ion-list>
                    </ion-item>

                    <ion-item no lines>
                        Total: ${{ticket.total}}
                    </ion-item>
                    <ion-item no lines>
                        Pagaste con:
                        <ion-grid>
                            <ion-row>
                                - {{toCapitalize(ticket.payment_methods.name)}}
                            </ion-row>
                            <ion-row>
                                Abonaste: ${{ticket.payment_methods.amountPaid}}
                            </ion-row>
                        </ion-grid>
                    </ion-item>
                    <div>
                        Nota: cuando llegués a la entrada, mostrale al boletero/a o barman/barwoman este ticket, asi aprovechás tu compra!.
                    </div>
                </ion-list>
            </ion-card-content>
        </ion-card>
    </div>
</ion-content>


<ion-footer>
    <ion-row>
      <ion-col no-padding>
        <button type="submit" ion-button full color="loginButton" class="oneButtons" 
         (tap)="downloadTicket()" no-margin style="width: 100%"> 
          Imprimir
        </button>  
      </ion-col>
    </ion-row>
</ion-footer>